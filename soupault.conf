### Configuration file for the soupault website generator ###

## Global settings

[settings]
  # Show build progress
  verbose = true

  # Show detailed debug information
  debug = false

  # Fail on page processing errors
  strict = true

  # Where generated files go
  build_dir = "build/"

  # Where page files are stored
  site_dir = "site/"

  # Where in the template the page content is inserted
  default_content_selector = "body"

  default_template_file = "templates/main.html"

  # Page considered the section index
  index_page = "index"

  page_file_extensions = ["html"]

  doctype = "<!DOCTYPE html>"

  # Automatically load Lua plugins from plugins/
  # E.g. plugins/reading-time.lua is automatically loaded as "reading-time" widget.
  plugin_discovery = true
  plugin_dirs = ["plugins"]

## Autogenerated section index settings
[index]
  index = true

  sort_descending = true

  extract_after_widgets = ['insert-reading-time']

  sort_by = "date"

[index.fields]
  title = {
    selector = ["#title", "h1"]
  }
  
  excerpt = {
    selector = ["#summary", "p"]
  }

  date = {
    selector = ["#revision", "time"]
  }

  reading_time = {
    selector = "#reading-time"
  }

[index.views.blog]
  # Insert generated index into an element that matches "#blog-index" selector.
  index_selector = "#blog-index"

  section = "blog"

  # Jingoo template for a single item
  # There's also an index_template option if you want to loop through the items yourself,
  # and index_processor for those who want to use an external script
  # (index data JSON written to its stdin)
  index_item_template = """
    <h2><a href="{{url}}">{{title}}</a></h2>
    <p><strong>Last update:</strong> {{date}}.</p>
    <p><strong>Reading time:</strong> {{reading_time}}.</p>
    <p>{{excerpt}}</p>
    <a href="{{url}}">Read more</a>
    <hr>
"""

## Widgets

# Takes the content of the first #page-title element or <h1> and inserts it into the <title>
# default is used if page has no elements matching those selectors.
[widgets.page-title]
  widget = "title"
  selector = ["#page-title", "h1"]
  default = "Sample site"
  append = " &mdash; Sample site"

# Simply inserts contents of templates/footer.html at the end of the <body>
[widgets.insert-footer]
  widget = "include"
  selector = "body"
  action = "append_child"
  file = "templates/footer.html"

[widgets.insert-reading-time-container]
  section = "blog/"
  widget = "insert_html"
  action = "insert_after"
  selector = "h1"
  html = '<div>Estimated reading time: <span id="reading-time"></span>.</div>'

[widgets.insert-reading-time]
  after = "insert-reading-time-container"
  widget = "reading-time"
  selector = "#reading-time"
  content_selector = "main"

# Inserts a table of contents generated from page headings
[widgets.table-of-contents]
  #exclude_path_regex = '/index(.*)'

  widget = "toc"
  selector = "#generated-toc"

  min_level = 2

  toc_list_class = "toc"
  toc_class_levels = false

  valid_html = true

  numbered_list = true

  heading_links = true
  heading_link_text = "â†’ "
  heading_link_class = "here"

  use_heading_slug = true

